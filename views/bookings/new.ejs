<%layout("/layouts/boilerplate")%>

<style>
  .booking-wrapper {
    display: flex;
    min-height: 100vh;
  }

  .left-panel {
    flex: 1;
    background: #f44336;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 40px 20px;
    position: relative;
    /* background-image: url("/public/images/travelgirlimage.png"); */
    background-size: cover;
    background-position: center;
    text-align: center;
  }

  .left-panel h2 {
    font-size: 28px;
    font-weight: bold;
    margin-top: 20px;
  }

  .left-panel p {
    font-size: 16px;
    max-width: 300px;
  }

  .right-panel {
    flex: 1;
    background: #fff;
    padding: 50px 30px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .form-box {
    width: 100%;
    max-width: 600px;
    background: #fff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 0 30px rgba(0,0,0,0.1);
  }

  .form-box h2 {
    font-weight: bold;
    margin-bottom: 20px;
    color: #333;
  }

  @media (max-width: 768px) {
    .booking-wrapper {
      flex-direction: column;
    }

    .left-panel {
      height: 250px;
    }

    .right-panel {
      padding: 20px;
    }

    .form-box {
      padding: 20px;
    }
  }
</style>
<body>
  <div class="right-panel">
    <div class="form-box">
      <h2>Book Listing: <%= listing.title %></h2>
      <form action="/book/<%= listing._id %>" method="POST">
        <div class="form-group">
          <label>Username:</label>
          <input type="text" name="username" class="form-control" required>
        </div>
        <div class="form-group">
          <label>Email:</label>
          <input type="email" name="email" class="form-control" required>
        </div>
        <div class="form-group">
          <label>Country:</label>
          <input type="text" name="country" class="form-control" required>
        </div>
        <div class="form-group">
          <label>Address:</label>
          <input type="text" name="address" class="form-control" required>
        </div>
        <div class="form-group">
          <label>Phone Number:</label>
          <input type="number" name="phone" class="form-control" required>
        </div>
        <div class="form-group">
          <label>State:</label>
          <input type="text" name="state" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="arrivalTime" class="form-label">Arrival Time</label>
          <input type="datetime-local" name="arrivalTime" id="arrivalTime" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="departureTime" class="form-label">Departure Time</label>
          <input type="datetime-local" name="departureTime" id="departureTime" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="totalGuests" class="form-label">Total Guests</label>
          <input type="number" name="totalGuests" id="totalGuests" class="form-control" required min="1" />
        </div>
        <div class="form-group">
          <label for="roomType" class="form-label">Room Type</label>
          <select name="roomType" id="roomType" class="form-control" required>
            <option value="">-- Select Room Type --</option>
            <option value="Single Bed">Single Bed</option>
            <option value="Double Bed">Double Bed</option>
          </select>
        </div>
        <div class="form-group">
          <label for="roomsRequired" class="form-label">Number of Rooms</label>
          <input type="number" name="roomsRequired" id="roomsRequired" class="form-control" required min="1" />
        </div>
        <div class="form-group">
          <label for="message" class="form-label">Message to Owner (Optional)</label>
          <textarea name="message" class="form-control" id="message" rows="4" placeholder="e.g. Late check-in request"></textarea>
        </div>
        <button type="submit" class="btn btn-success mt-3 mb-3">Submit Booking</button>
      </form>
    </div>
  </div>
</div>
<script>
        const arrivalTimeInput = document.getElementById('arrivalTime');
        const departureTimeInput = document.getElementById('departureTime');

        function validateTimes() {
            const arrivalTime = new Date(arrivalTimeInput.value);
            const departureTime = new Date(departureTimeInput.value);

            if (arrivalTime >= departureTime) {
                alert("Arrival time must be earlier than departure time!");
                departureTimeInput.setCustomValidity("Departure time must be later than arrival time.");
            } else {
                departureTimeInput.setCustomValidity("");
            }
        }

        arrivalTimeInput.addEventListener('input', validateTimes);
        departureTimeInput.addEventListener('input', validateTimes);
</script>
</body>